{% block create %}
    <div class="outerBox_add-edit_window">
        <div id="addWindow" style="position:absolute; z-index: 5">
            <div id="add_categories" style="display: none">
                <div style="position: absolute; z-index: 7; width: 100%;height: 100%;display: flex;align-items: center;justify-content: center;background-color: #00000026;">
                    <div style="background-color: white; width: 350px; height: 430px; padding: 5px 10px; display: flex; flex-flow: column; align-items: center; border-radius: 4px; position: relative">
                        <div style="margin: 10px 0">
                            <span style="font-size: 1.25rem">
                                Kategorie
                            </span>
                        </div>
                        <div style="max-height: 240px; overflow-y: auto">
                            {% include 'customElements/categories_list_addedit_wind.html' %}
                        </div>
                        <div style="position: absolute; bottom: 15px;">
                            <button type="button" class="button_filled" id="add_categories_button">
                                <span class="button_filled-text">
                                    Uložit
                                </span>
                            </button>
                        </div>
                    </div>

                </div>
            </div>

            <script src="{{ url_for('static', filename='js/helpers.js') }}"></script>

            <div class="float">
                <form name="addRecord" id="addRecord" method="post" class="flex_pres" onsubmit="return validateForm()">
                    <div style="margin: 2rem;">
                        <div>
                            <div style="display: flex;justify-content: space-between; align-items: center;">
                                <div>
                                    <legend>Přidat Záznam</legend>
                                </div>
                                <div class="wrap"
                                     style="/*width: 200px;*/ justify-content: center; align-items: center; display: flex">
                                    <div>
                                        <button type="button" class="button_text" id="categories_add">
                                        <span class="button_text-text">
                                            + Kategorie
                                        </span>
                                        </button>

                                        <input type="text" name="categories_overall" id="categories_overall"
                                               style="display: none">
                                    </div>
                                </div>
                            </div>

                            <div style="display: flex; gap: 4px" id="categorie_list">
                            </div>
                        </div>


                        <div class="flex_row spaceBetween" style="margin-top: 2rem">
                            <div class="wrap">
                                <label class="popis_textBox" for="_formProgLang_select">Programovací Jazyk</label>
                                <select name="formProgLang_select" id="_formProgLang_select" class="textfield"
                                        itemid="0">
                                    <option value="None">None</option>
                                    {% for def in defs %}
                                        <option id="option_{{ def.progLangs }}"
                                                value="{{ def.progLangs }}">{{ def.progLangs }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="ratingslider wrap">
                                <label for="formRating" class="popis_textBox">Hodnocení</label>
                                <select name="formRating" id="_formRating" class="textbox textfield">
                                    <option value="0">0</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                </select>
                            </div>
                        </div>

                        <div class="flex_row spaceBetween descForm">
                            <div style="width: 45%" class="wrap">
                                <label class="popis_textBox" for="_formDate">Datum</label>
                                <input type="date" name="formDate" class="textfield" id="_formDate"
                                       placeholder="dd-mm-yyyy">
                            </div>
                            <div class="wrap">
                                <label class="popis_textBox" for="_formMinutes">Čas (m)</label>
                                <input type="number" name="formMinutes" class="textfield" id="_formMinutes" min="0"
                                       value="0">
                            </div>
                        </div>

                        <div class="wrap descForm">
                            <label class="popis_textBox" for="_formDesc">Popis</label>
                            <textarea name="formDesc" class="textbox" id="_formDesc" cols="70" rows="10"></textarea>
                        </div>

                        <div class="center flex buttonForm">
                            <div class="flex_row buttons_action">
                                <div>
                                    <button type="button" class="button_text" id="cancel_add">
                                        <span class="button_text-text">
                                                Zrušit
                                        </span>
                                    </button>
                                </div>
                                <div>
                                    <button type="submit" id="Submit" class="button_filled">
                                        <span class="button_filled-text"
                                              style="padding-left: 11px; padding-right: 11px">
                                                Uložit
                                        </span>
                                    </button>
                                </div>
                            </div>
                        </div>

                    </div>
                </form>

                <script src="{{ url_for('static', filename='js/checkForFormAndNumber.js') }}"></script>

                <script>
                    document.getElementById('_formDate').valueAsDate = new Date();
                    document.getElementById('_formDate').max = new Date().toISOString().split("T")[0];

                </script>

                <script>
                    cancel_remove_warn()

                    function cancel_remove_warn() {
                        console.log("ready")
                        $('#_addEdit_window').css('display', 'block')
                        $('#cancel_add').click(function () {
                            $('#_addEdit_window').css('display', 'none')
                            $('#addWindow').remove()
                        })
                    }

                    $(function () { //odstranění uzivatele pomocí ajax protokolu
                        $('#addRecord').submit(function (event) {
                            console.log(self_statement)
                            event.preventDefault()
                            validateForm()
                            form = $(this)
                            if (canBePosted) {
                                $.ajax({
                                    type: "POST",
                                    url: "/app/add/",
                                    data: form.serialize(),
                                    success: function (response) {
                                        sortWithoutRefresh()
                                        $('#addWindow').remove()
                                        $('#_addEdit_window').css('display', 'none')
                                    },
                                });
                            }

                        });
                    });

                    $('#addWindow').on("click", function () {
                        event.stopPropagation()
                    })

                    $('#add_categories_button').on("click", function () {
                        $('#add_categories').css("display", "none")
                    })

                    $('#categories_add').on("click", function () {
                        $('#add_categories').css("display", "block")
                    })

                    $('html').on("click", function () {
                        $('#_addEdit_window').css('display', 'none')
                        $('#addWindow').remove()
                    })
                </script>
            </div>
        </div>
    </div>


{% endblock %}