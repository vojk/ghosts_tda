{% block edit %}
    <div class="outerBox_add-edit_window">
        <div id="addWindow" style="position:absolute; z-index: 5">

            {% for record in record %}
                <div class="float">
                    <form name="editRecord" id="editRecord" method="post" class="flex_pres"
                          onsubmit="return validateForm()">
                        <div style="margin: 2rem;">
                            <legend>Upravit Záznam</legend>

                            <div class="flex_row spaceBetween" style="margin-top: 2rem">
                                <div class="wrap">
                                    <label class="popis_textBox" for="_formProgLang_select">Programovací Jazyky</label>
                                    <select name="formProgLang_select" id="_formProgLang_select" class="textfield">
                                        <option value="None">None</option>
                                        {% for def in defs %}
                                            <option value="{{ def.progLangs }}">{{ def.progLangs }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="ratingslider">
                                    <input type="range" name="formRating" id="_formRating" max="5" min="0"
                                            {# value="0" #}
                                           value="{{ record.rating }}">
                                </div>
                            </div>
                            <div class="flex_row spaceBetween descForm">
                                <div class="wrap">
                                    <label class="popis_textBox" for="_formProgLang_select">Programátoři</label>
                                    <select name="formProgrammer_select" id="_formProgrammer_select" class="textfield"
                                            itemid="0">
                                        <option value="None">None</option>
                                        {% for programmer in programmers %}
                                            <option id="option_{{ programmer.programmer }}"
                                                    value="{{ programmer.programmer }}">{{ programmer.programmer }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>

                            <div class="flex_row spaceBetween descForm">
                                <div style="width: 45%" class="wrap">
                                    <label class="popis_textBox" for="_formDate">Datum</label>
                                    <input type="date" name="formDate" class="textfield" id="_formDate"
                                           placeholder="dd-mm-yyyy"
                                           value="{{ record.dates }}">
                                </div>
                                <div class="wrap">
                                    <label class="popis_textBox" for="_formMinutes">Čas</label>
                                    <input type="number" name="formMinutes" class="textfield" id="_formMinutes" min="0"
                                            {# value="0" #} value="{{ record.timeInMinutes }}">
                                </div>
                            </div>

                            <div class="wrap descForm">
                                <label class="popis_textBox" for="_formDesc">Popis</label>
                                <textarea name="formDesc" class="textbox" id="_formDesc" cols="70"
                                          rows="10">{{ record.description }}</textarea>
                            </div>

                            <div class="center flex buttonForm">
                                <div class="flex_row buttons_action">
                                    <div>
                                        <button type="button" class="button_text" id="cancel_edit">
                                            <span class="button_text-text">
                                                Zrušit
                                            </span>
                                        </button>
                                    </div>
                                    <div>
                                        <button type="submit" id="Submit" class="button_filled">
                                            <span class="button_filled-text"
                                                  style="padding-left: 11px; padding-right: 11px">
                                                Uložit
                                            </span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </form>

                    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">

                    <script src="{{ url_for('static', filename='js/checkForFormAndNumber.js') }}"></script>

                    <script>
                        function selectElement(id, valueToSelect) {
                            let element = document.getElementById(id);
                            element.value = valueToSelect;
                        }

                        selectElement('_formProgLang_select', '{{ record.programmingLang }}')
                        selectElement('_formProgrammer_select', '{{ record.programmer }}')
                    </script>
                </div>
            {% endfor %}
        </div>
    </div>

    <script>
        cancel_remove_warn()

        function cancel_remove_warn() {
            console.log("ready")
            $('#_addEdit_window').css('display', 'block')
            $('#cancel_edit').click(function () {
                $('#_addEdit_window').css('display', 'none')
                $('#addWindow').remove()
            })
        }

        $(function () { //odstranění uzivatele pomocí ajax protokolu
            $('#editRecord').submit(function (event) {
                console.log(self_statement)
                event.preventDefault()
                form = $(this)
                $.ajax({
                    type: "POST",
                    url: "/app/" + record_id + "/edit/",
                    data: form.serialize(),
                    success: function (response) {
                        sortWithoutRefresh()
                        $('#editRecord').remove()
                        $('#_addEdit_window').css('display', 'none')
                    },
                });
            });
        });
    </script>
{% endblock %}